"use strict";const e=require("vue"),t=require("./floatingUi-sheKfMg1.js"),o=require("./index-CHhN7c8p.js"),l=require("./useDefaults-DA3S59IE.js"),a=require("./useId-C1J_udPo.js"),r=require("./classes-CXBJXuVd.js"),n=require("./BButton.vue_vue_type_script_setup_true_lang-CE6qvsTI.js"),i=require("./ConditionalWrapper.vue_vue_type_script_lang-Du33jXia.js"),d=require("./ConditionalTeleport.vue_vue_type_script_lang-IRCRuUE1.js"),u=require("./keys-dS8HZUdm.js"),s=require("./index-BthPTI3K.js"),p={class:"visually-hidden"},f=["aria-labelledby","role"],v=e.defineComponent({__name:"BDropdown",props:e.mergeModels({ariaLabel:{default:void 0},autoClose:{type:[Boolean,String],default:!0},boundary:{default:"clippingAncestors"},boundaryPadding:{default:void 0},disabled:{type:Boolean,default:!1},floatingMiddleware:{default:void 0},id:{default:void 0},isNav:{type:Boolean,default:!1},lazy:{type:Boolean,default:!1},menuClass:{default:void 0},noCaret:{type:Boolean,default:!1},noFlip:{type:Boolean,default:!1},noShift:{type:Boolean,default:!1},noSize:{type:Boolean,default:!1},offset:{default:0},role:{default:"menu"},size:{default:"md"},skipWrapper:{type:Boolean,default:!1},split:{type:Boolean,default:!1},splitButtonType:{default:"button"},splitClass:{default:void 0},splitDisabled:{type:Boolean,default:void 0},splitHref:{default:void 0},splitTo:{default:void 0},splitVariant:{default:void 0},strategy:{default:"absolute"},text:{default:void 0},toggleClass:{default:void 0},toggleText:{default:"Toggle dropdown"},variant:{default:"secondary"},wrapperClass:{default:void 0},placement:{default:"bottom-start"},teleportDisabled:{type:Boolean,default:!1},teleportTo:{default:void 0}},{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:e.mergeModels(["click","hidden","hide","hide-prevented","show","show-prevented","shown","toggle"],["update:modelValue"]),setup(v,{expose:c,emit:g}){const y=v,m=l.useDefaults(y,"BDropdown"),w=g,b=a.useId((()=>m.id),"dropdown"),h=e.useModel(v,"modelValue"),C=e.inject(u.inputGroupKey,!1),_=e.inject(u.buttonGroupKey,!1),B=e.computed((()=>"string"==typeof m.offset||"number"==typeof m.offset?m.offset:NaN)),k=s.useToNumber(B),x=e.ref(null),S=e.ref(null),z=e.ref(null),T=e.ref(null),N=e.computed((()=>t.isBoundary(m.boundary)?m.boundary:void 0)),D=e.computed((()=>t.isRootBoundary(m.boundary)?m.boundary:void 0)),j=e.computed((()=>m.split?S.value:z.value));o.onKeyStroke("Escape",(()=>{h.value=!h.value}),{target:j}),o.onKeyStroke("Escape",(()=>{h.value=!h.value}),{target:x});const q=(t,o)=>{var l,a,r,n,i,d,u;if(null==(a=x.value)?void 0:a.contains(null==(l=t.target)?void 0:l.closest("form")))return;if(/input|select|option|textarea|form/i.test(null==(r=t.target)?void 0:r.tagName))return;if(t.preventDefault(),!h.value)return open(),void e.nextTick((()=>q(t,o)));const s=null==(n=x.value)?void 0:n.querySelectorAll(".dropdown-item:not(.disabled):not(:disabled)");if(s)if(null==(i=x.value)?void 0:i.contains(document.activeElement)){const e=x.value.querySelector(".dropdown-item:focus"),t=Array.prototype.indexOf.call(s,e)+o;t>=0&&t<(null==s?void 0:s.length)&&(null==(d=s[t])||d.focus())}else null==(u=s[-1===o?s.length-1:0])||u.focus()};o.onKeyStroke("ArrowUp",(e=>q(e,-1)),{target:j}),o.onKeyStroke("ArrowDown",(e=>q(e,1)),{target:j}),o.onKeyStroke("ArrowUp",(e=>q(e,-1)),{target:x}),o.onKeyStroke("ArrowDown",(e=>q(e,1)),{target:x});const V=e.ref({}),E=e.computed((()=>{if(void 0!==m.floatingMiddleware)return m.floatingMiddleware;const e="string"==typeof m.offset||"number"==typeof m.offset?k.value:m.offset,o=[t.offset(e)];return!1===m.noFlip&&o.push(t.flip({boundary:N.value,rootBoundary:D.value,padding:m.boundaryPadding})),!1===m.noShift&&o.push(t.shift({boundary:N.value,rootBoundary:D.value,padding:m.boundaryPadding})),!1===m.noSize&&o.push(t.size({boundary:N.value,rootBoundary:D.value,padding:m.boundaryPadding,apply({availableWidth:e,availableHeight:t}){V.value={maxHeight:t&&h.value?`${t}px`:void 0,maxWidth:e&&h.value?`${e}px`:void 0}}})),o})),{update:K,floatingStyles:A}=t.useFloating(j,x,{placement:()=>m.placement,middleware:E,strategy:e.toRef((()=>m.strategy)),whileElementsMounted:t.z}),M=_?{class:"btn-group",role:"group"}:void 0,W=e.computed((()=>[null==M?void 0:M.class,m.wrapperClass,{"btn-group":!m.wrapperClass&&m.split,dropdown:!m.wrapperClass&&!m.split,"position-static":"clippingAncestors"!==m.boundary&&!m.isNav}])),H=e.computed((()=>[m.split?m.splitClass:m.toggleClass,{"nav-link":m.isNav,"dropdown-toggle":!m.split,"dropdown-toggle-no-caret":m.noCaret&&!m.split,show:m.split?void 0:h.value}])),P=()=>{I()},$=e=>{m.split?w("click",e):P()};o.onClickOutside(x,(()=>{!h.value||!0!==m.autoClose&&"outside"!==m.autoClose||I()}),{ignore:[S,z]});const R=()=>{!h.value||!0!==m.autoClose&&"inside"!==m.autoClose||I()},F=()=>{h.value&&I()},G=()=>{h.value||I()},I=()=>{var e,t;w("toggle");const o=h.value,l=new r.BvTriggerableEvent(o?"hide":"show");w(o?"hide":"show",l),l.defaultPrevented?w(o?"hide-prevented":"show-prevented"):(h.value=!o,w(o?"hidden":"shown"),null==(t=null==(e=T.value)?void 0:e.dispatchEvent)||t.call(e,new Event("forceHide")))};return e.watch(h,(()=>{K()})),c({hide:F,show:G,toggle:I}),e.provide(u.dropdownInjectionKey,{id:b,show:G,hide:F,toggle:I,visible:e.toRef((()=>h.value)),isNav:e.toRef((()=>m.isNav))}),(t,o)=>{var l;return e.openBlock(),e.createBlock(i._sfc_main,{ref_key:"wrapper",ref:T,skip:e.unref(C)||e.unref(m).skipWrapper,class:e.normalizeClass(W.value),role:null==(l=e.unref(M))?void 0:l.role},{default:e.withCtx((()=>[e.createVNode(n._sfc_main,{id:e.unref(b),ref_key:"splitButton",ref:z,variant:e.unref(m).splitVariant||e.unref(m).variant,size:e.unref(m).size,class:e.normalizeClass(H.value),disabled:e.unref(m).splitDisabled||e.unref(m).disabled,type:e.unref(m).splitButtonType,"aria-label":e.unref(m).ariaLabel,"aria-expanded":e.unref(m).split?void 0:h.value,"aria-haspopup":e.unref(m).split?void 0:"menu",href:e.unref(m).split?e.unref(m).splitHref:void 0,to:e.unref(m).split&&e.unref(m).splitTo?e.unref(m).splitTo:void 0,onClick:$},{default:e.withCtx((()=>[e.renderSlot(t.$slots,"button-content",{},(()=>[e.createTextVNode(e.toDisplayString(e.unref(m).text),1)]))])),_:3},8,["id","variant","size","class","disabled","type","aria-label","aria-expanded","aria-haspopup","href","to"]),e.unref(m).split?(e.openBlock(),e.createBlock(n._sfc_main,{key:0,ref_key:"button",ref:S,variant:e.unref(m).variant,size:e.unref(m).size,disabled:e.unref(m).disabled,class:e.normalizeClass([[e.unref(m).toggleClass,{show:h.value}],"dropdown-toggle-split dropdown-toggle"]),"aria-expanded":h.value,"aria-haspopup":"menu",onClick:P},{default:e.withCtx((()=>[e.createElementVNode("span",p,[e.renderSlot(t.$slots,"toggle-text",{},(()=>[e.createTextVNode(e.toDisplayString(e.unref(m).toggleText),1)]))])])),_:3},8,["variant","size","disabled","class","aria-expanded"])):e.createCommentVNode("",!0),e.createVNode(d._sfc_main,{to:e.unref(m).teleportTo,disabled:!e.unref(m).teleportTo||e.unref(m).teleportDisabled},{default:e.withCtx((()=>[!e.unref(m).lazy||h.value?e.withDirectives((e.openBlock(),e.createElementBlock("ul",{key:0,ref_key:"floating",ref:x,style:e.normalizeStyle([e.unref(A),V.value]),class:e.normalizeClass(["dropdown-menu overflow-auto",[e.unref(m).menuClass,{show:h.value}]]),"aria-labelledby":e.unref(b),role:e.unref(m).role,onClick:R},[e.renderSlot(t.$slots,"default",{hide:F,show:G})],14,f)),[[e.vShow,e.unref(m).lazy||h.value]]):e.createCommentVNode("",!0)])),_:3},8,["to","disabled"])])),_:3},8,["skip","class","role"])}}});exports._sfc_main=v;
//# sourceMappingURL=BDropdown.vue_vue_type_script_setup_true_lang-BK6sfMpo.js.map
